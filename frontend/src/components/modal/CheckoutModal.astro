---
import Button from '@components/common/Button.astro';
---

<div class="modal modal-checkout main-padding" data-target="modal-checkout">
  <div class="modal__wrapper modal__wrapper--center modal-checkout__wrapper">
    <span class="modal-checkout__icon">
      <svg
        width="1em"
        height="1em"
        viewBox="0 0 64 64"
        xmlns="http://www.w3.org/2000/svg">
        <g fill="none" fill-rule="evenodd">
          <circle fill="#D87D4A" cx="32" cy="32" r="32"></circle><path
            stroke="#FFF"
            stroke-width="4"
            d="m20.754 33.333 6.751 6.751 15.804-15.803">
          </path>
        </g>
      </svg>
    </span>
    <p class="modal-checkout__title">THANK YOU <br /> FOR YOUR ORDER</p>
    <p class="modal-checkout__subtitle">
      You will receive an email confirmation shortly.
    </p>
    <div class="modal-checkout__summary">
      <div class="modal-checkout__left">
        <div
          class="modal-checkout__products"
          data-target="modal-checkout-products">
        </div>
        <div class="modal-checkout__show-more">
          <button
            class="modal-checkout__show-more__btn"
            data-action="show-more-items">
            and <span data-target="show-more-items-number"></span> more items
          </button>
        </div>
      </div>
      <div class="modal-checkout__right">
        <p class="modal-checkout__summary__gt">GRAND TOTAL</p>
        <p
          class="modal-checkout__summary__price"
          data-target="modal-checkout-price">
          $ 0
        </p>
      </div>
    </div>
    <Button size="lg" label="back to home" href="/" />
  </div>
</div>
<style lang="scss">
  .modal-checkout {
    padding-top: 8rem;
    padding-bottom: 4rem;

    &__wrapper {
      max-width: 33.75rem;
      border-radius: 8px;
      background: var(--foreground-light);
      padding: 2rem;
    }
    &__icon {
      display: block;
      width: fit-content;
      margin-bottom: 2rem;
      font-size: 4rem;
    }
    &__title {
      color: var(--foreground-dark);
      font-size: 1.5rem;
      font-style: normal;
      font-weight: 700;
      line-height: 1.2;
      margin-bottom: 1rem;
      letter-spacing: 0.0536rem;
      text-transform: uppercase;
    }
    &__subtitle {
      color: var(--foreground-dark);
      font-size: 0.9375rem;
      font-style: normal;
      font-weight: 400;
      line-height: 1.66;
      margin-bottom: 1.5rem;
      opacity: 0.5;
    }
    &__summary {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 3rem;
      border-radius: 8px;
      background: #f1f1f1;
      width: 100%;
      overflow: hidden;
      &__gt {
        color: var(--foreground-light);
        font-size: 0.9375rem;
        font-style: normal;
        font-weight: 400;
        line-height: 1.66; /* 166.667% */
        opacity: 0.5;
        text-transform: uppercase;
        margin-bottom: 8px;
        margin-top: auto;
      }
      &__price {
        color: var(--foreground-light);
        font-size: 1.125rem;
        font-style: normal;
        font-weight: 700;
        line-height: 1.2;
        text-transform: uppercase;
      }
    }
    &__left {
      flex: 1 1 10.5rem;
      position: relative;
      padding: 1.5rem;
    }
    &__products {
      display: flex;
      width: 100%;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 0.75rem;
    }
    &__show-more {
      padding-top: 0.75rem;
      width: 100%;
      border-top: 1px solid var(--secondary-grey);
      &__btn {
        display: block;
        color: var(--foreground-dark);
        font-size: 0.75rem;
        font-style: normal;
        font-weight: 700;
        line-height: normal;
        letter-spacing: -0.0134rem;
        opacity: 0.5;
        margin-inline: auto;
        width: fit-content;
      }
    }
    &__right {
      flex: 1 1 9.25rem;
      padding: 2.5rem 2rem;
      background-color: var(--foreground-dark);
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
    }
  }
  @media screen and (min-width: 43.75rem) {
    .modal-checkout {
      padding-top: 9.5rem;
      padding-bottom: 6rem;
      &__wrapper {
        padding: 3rem;
        margin-bottom: 2rem;
        letter-spacing: 1.1424px;
      }
      &__title {
        font-size: 2rem;
      }
      &__subtitle {
        margin-bottom: 2rem;
      }
    }
  }
  @media screen and (min-width: 75rem) {
    .modal-checkout {
      padding-top: 10rem;
      padding-bottom: 6rem;
    }
  }
</style>
<script>
  const showMoreBtn = document.querySelector(
    'button[data-action="show-more-items"]'
  );

  showMoreBtn.addEventListener('click', () => {
    const items = document.querySelectorAll('[data-target="dynamic-item"]');

    items.forEach((item) => item.classList.toggle('show-only-first'));
    showMoreBtn.textContent =
      showMoreBtn.textContent === 'show less'
        ? `and ${items.length - 1} more items`
        : 'show less';
  });
</script>
